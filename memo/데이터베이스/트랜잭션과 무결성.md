- 트랜잭션
	- 정의
		- 여러 개 쿼리들을 하나로 묶는 단위
		- 커밋의 시작과 커밋의 종료까지가 하나의 트랜잭션이다. 
		- 한 단위의 트랜잭션이 수행되고 난 후에 데이터베이스에 영구 저장된다. 
		- 이 때 문제가 있다면 롤백된다. 
		- 이를 통해 무결성을 보장
	- 트랜잭션의 전파
		- 스프링 : @Transactional을 통해 트랜잭션 관련 메서드의 호출을 하나의 트랜잭션에 묶이도록 해준다. 
	- 트랜잭션의 특성
		- 원자성
			- 트랜잭션의 연산들이 모두 정상적으로 실행되거나 하나도 실행되지 않아야 하는 all-or-nothing 방식을 의미
			- 안되면 롤백
		- 일관성
			- 허용된 방식으로만 데이터를 변경해야 한다. 
			- 조건, 규칙이 항상 적용되어야 한다. 
			- 같은 타입의 변화만 가능하다. 
		- [격리성](격리성.md)
			- 트랜잭션 수행 시 서로 간섭할 수 없다. 
			- 격리성의 보장을 위해서는 여러 트랜잭션이 동시에 수행되더라도 마치 순서대로 하나씩 수 행되는 것처럼 정확하고 일관된 결과를 얻을 수 있도록 제어하는 기능이 필요하다
		- 지속성
			- 트랜잭션이 성공적으로 완료된 후 데이터베이스에 반영한 수행 결과는 영구적이어야 한다.
			- 지속성의 보장을 위해서는 장애 발생 시 회복 기능이 필요하다
		- 이를 위해 DBMS는 회복, 병행 제어 기능이 필요하다.
	- 장애의 종류
		- 트랜잭션 장애
			- 트랜잭션의 논리적 오류, 잘못된 데이터 입력, 시스템 자원 과다 요구, 처리 대상의 데이터 부재 등
		- 시스템 장애
			- 하드웨어 이상으로 저장된 정보 손실, 교착 상태
		- 미디어 장애
				- 디스크 헤드의 손상이나 고장
	- 회복
		- 정의
			- 장애가 발생했을 때 데이터베이스를 장애가 발생하기 전의 일관된 상태로 복구시키는 것
			- 트랜잭션의 특성을 보장하고, 데이터베이스를 일관된 상태로 유지하기 위해 필수적인 기능
		- 회복을 위한 데이터 복사본을 만드는 방법
			- 덤프
				- 데이터베이스를 주기억장치에 복사해둔다.
				- 비효율적이다.
			- 로그
				- 변경 이전 이후 값을 기록해둔다. 
		- 기본 연산
			- redo(재실행) : 전체적으로 문제가 있을 때, 데이터베이스 복사본을 가져와 장애 직전까지 데이터베이스 상태로 복구한다. 
			- undo(취소) : 로그를 이용해 지금까지 실행된 모든 변경 연산을 취소하여 데이터베이스를 원래 상태로 복구
		- 기법
			- 로그회복기법
				- 즉시 갱신 회복 기법
					- 트랜잭션 수행 중에 데이터 변경 연산의 결과를 데이터베이스에 즉시 반영
					- 장애 발생에 대비하기 위해 데이터 변경에 대한 내용을 로그 파일에 기록
					- 장애 발생 시점에 따라 redo나 undo 연산을 실행해 데이터베이스를 복구
					- 트랜잭션 완료 전 장애 발생
						- start 로그만 있으면 undo 처리한다.
					- 트랜잭션 완료 후 장애 발생
						- start, commit이 존재하면 redo 처리한다.
				- 지연 갱신 회복 기법
					- 트랜잭션 수행 중에 데이터 변경 연산의 결과를 로그에만 기록해두고, 트랜잭션이 부분 완료된 후에 로그에 기록된 내용을 이용해 데이터베이스에 한번에 반영
					- 트랜잭션 수행 중에 장애가 발생할 경우 로그에 기록된 내용을 버리기만 하면 데이터베이스 가 원래 상태를 그대로 유지하게 됨
					- redo 연산만 사용
					- 트랜잭션 완료 전 장애 발생
						- 그냥 로그를 버린다.
					- 트랜잭션 완료 후 장애 발생
						- start, commit이 존재하면 redo 처리한다.
			- 검사회복기법
				- 로그를 이용한 회복은 시스템에 장애가 일어났을 때 어느 시점까지 되돌아가야 하는지 알 수 없다. 
				- 트랜잭션이 많은 응용의 경우 하루 이상 되돌아가서 복구하는 것은 사실상 불가능 하다.
				- 회복 시 많은 양의 로그를 검색하고 갱신하는 시간을 줄이기 위하여 몇 십 분 단위로 데이터 베이스와 트랜잭션 로그 파일을 동기화한 후 동기화한 시점을 로그 파일에 기록해두는 방법 혹은 그 시점을 체크포인트(혹은 검사점)라고 한다.
				- 이 체크포인트를 로그에 표시하는 식으로 처리된다. 
				- 회복방식
					- 체크포인트 이전에 COMMIT 기록이 있는 경우
						- 아무 작업이 필요 없음. 
						- 로그에 체크포인트가 나타나는 시점은 이미 변경 내용이 데이터베이스에 모두 기록된 후이기 때문.
					- 체크포인트 이후에 COMMIT기록이 있는 경우
						- REDO(T)를 진행. 체크포인트 이후에 변경 내용이 데이터베이스에 반영되지 않았으므로 REDO를
					- 체크포인트 이후에 COMMIT기록이 없는 경우
						- 즉시 갱신 방법을 사용했다면 UNDO(T)를 진행. 버퍼의 내용이 반영됐을 수도 있기 때문에 원상복구 시켜야 함.
						- 지연 갱신 방법을 사용했다면 아무것도 할 필요가 없음. 지연 갱신 방법은 COMMIT 이전 에는 버퍼의 내용을 데이터베이스에 반영하지 않기 때문.
			- 미디어회복기법
				- 디스크 장애시에 덤프를 이용해 회복시킨다. 
	- 